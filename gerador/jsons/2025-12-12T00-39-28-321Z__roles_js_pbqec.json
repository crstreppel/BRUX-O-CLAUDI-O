{
  "caminho": "../backend/public/modules/roles",
  "arquivo": "roles.js",
  "conteudo": "const api = axios.create({\n  baseURL: '/roles',\n  headers: { Authorization: 'Bearer ' + localStorage.getItem('token') }\n});\n\nasync function carregarRoles() {\n  const res = await api.get('/listar');\n  const container = document.getElementById('roles-list');\n  container.innerHTML = '';\n\n  res.data.forEach(role => {\n    const div = document.createElement('div');\n    div.innerHTML = `\n      <p><strong>${role.nome}</strong></p>\n      <button onclick=\"gerenciarPermissoes(${role.id})\">Gerenciar Permissões</button>\n    `;\n    container.appendChild(div);\n  });\n}\n\nasync function gerenciarPermissoes(roleId) {\n  document.getElementById('perms-section').style.display = 'block';\n\n  const res = await api.get(`/${roleId}/permissoes`);\n  const rolePerms = document.getElementById('role-perms');\n  rolePerms.innerHTML = '<h3>Permissões atuais:</h3>';\n\n  res.data.permissoes.forEach(p => {\n    const div = document.createElement('div');\n    div.innerHTML = `\n      ${p.chave}\n      <button onclick=\"remover(${roleId}, ${p.id})\">Remover</button>\n    `;\n    rolePerms.appendChild(div);\n  });\n\n  const all = await axios.get('/permissoes/listar', {\n    headers: { Authorization: 'Bearer ' + localStorage.getItem('token') }\n  });\n\n  const allPerms = document.getElementById('all-perms');\n  allPerms.innerHTML = '<h3>Todas permissões:</h3>';\n\n  all.data.forEach(p => {\n    const div = document.createElement('div');\n    div.innerHTML = `\n      ${p.chave}\n      <button onclick=\"adicionar(${roleId}, ${p.id})\">Adicionar</button>\n    `;\n    allPerms.appendChild(div);\n  });\n}\n\nasync function adicionar(roleId, permId) {\n  await api.post(`/${roleId}/permissoes/adicionar`, { permissaoId: permId });\n  gerenciarPermissoes(roleId);\n}\n\nasync function remover(roleId, permId) {\n  await api.delete(`/${roleId}/permissoes/remover`, {\n    data: { permissaoId: permId }\n  });\n  gerenciarPermissoes(roleId);\n}\n\ncarregarRoles();\n"
}