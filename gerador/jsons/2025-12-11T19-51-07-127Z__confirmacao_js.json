{
  "caminho": "../backend/public/modules/confirmacao/",
  "arquivo": "confirmacao.js",
  "conteudo": "const API_BASE = \"/api/usuarios\";\n\nfunction setMessageConfirm(msg, type = \"info\") {\n  const el = document.getElementById(\"msgConfirmacao\");\n  if (!el) return;\n  el.textContent = msg || \"\";\n  el.className = \"auth-message \" + (msg ? `is-${type}` : \"\");\n}\n\nasync function postJSON(url, payload) {\n  const response = await fetch(url, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(payload || {})\n  });\n  const data = await response.json().catch(() => ({}));\n  return { ok: response.ok, status: response.status, data };\n}\n\nasync function handleConfirmacao(event) {\n  event.preventDefault();\n  const f = event.target;\n\n  const email = f.email?.value?.trim();\n  const codigo = f.codigo?.value?.trim();\n\n  if (!email || !codigo) {\n    setMessageConfirm(\"Informe e-mail e código.\", \"error\");\n    return;\n  }\n\n  setMessageConfirm(\"Validando código...\", \"info\");\n\n  try {\n    const { ok, data, status } = await postJSON(`${API_BASE}/confirmar-codigo`, { email, codigo });\n\n    if (!ok || !data.sucesso) {\n      setMessageConfirm(data.erro || `Erro ao confirmar (HTTP ${status}).`, \"error\");\n      return;\n    }\n\n    setMessageConfirm(\"E-mail confirmado com sucesso!\", \"success\");\n  } catch {\n    setMessageConfirm(\"Erro interno ao confirmar.\", \"error\");\n  }\n}\n\nasync function handleReenviar() {\n  const email = document.getElementById(\"confEmail\")?.value?.trim();\n  if (!email) {\n    setMessageConfirm(\"Digite o e-mail primeiro.\", \"error\");\n    return;\n  }\n\n  setMessageConfirm(\"Reenviando...\", \"info\");\n\n  const { ok, data, status } = await postJSON(`${API_BASE}/reenviar-confirmacao`, { email });\n\n  if (!ok || !data.sucesso) {\n    setMessageConfirm(data.erro || `Falha no reenvio (HTTP ${status}).`, \"error\");\n    return;\n  }\n\n  setMessageConfirm(\"Código reenviado! Verifique seu e-mail.\", \"success\");\n}\n\nwindow.addEventListener(\"DOMContentLoaded\", () => {\n  const form = document.getElementById(\"formConfirmar\");\n  if (form) form.addEventListener(\"submit\", handleConfirmacao);\n\n  const btn = document.getElementById(\"btnReenviar\");\n  if (btn) btn.addEventListener(\"click\", handleReenviar);\n});\n"
}