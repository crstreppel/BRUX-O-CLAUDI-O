[
  {
    "caminho": "../backend/modules/usuarios",
    "arquivo": "usuarioController.js",
    "conteudo": "const Usuario = require('./usuarioModel');\n\n// =============================================================\n// Controller do módulo Usuarios (Maria Fumaça PBQE-C)\n// =============================================================\n\nmodule.exports = {\n\n  // -----------------------------------------\n  // 1) Cadastro de usuário\n  // -----------------------------------------\n  async cadastrarUsuario(req, res) {\n    try {\n      const { usuario, senha } = req.body;\n\n      // validação simples\n      if (!usuario || !senha) {\n        return res.status(400).json({ erro: 'Usuário e senha são obrigatórios.' });\n      }\n\n      // verifica se já existe\n      const existe = await Usuario.findOne({ where: { usuario } });\n      if (existe) {\n        return res.status(400).json({ erro: 'Usuário já existe.' });\n      }\n\n      // cria\n      await Usuario.create({ usuario, senha });\n\n      return res.json({ sucesso: true, mensagem: 'Usuário criado com sucesso!' });\n\n    } catch (error) {\n      console.error('Erro no cadastro:', error);\n      return res.status(500).json({ erro: 'Erro interno no servidor.' });\n    }\n  },\n\n  // -----------------------------------------\n  // 2) Login\n  // -----------------------------------------\n  async loginUsuario(req, res) {\n    try {\n      const { usuario, senha } = req.body;\n\n      // validação\n      if (!usuario || !senha) {\n        return res.status(400).json({ erro: 'Usuário e senha são obrigatórios.' });\n      }\n\n      // busca usuário\n      const user = await Usuario.findOne({ where: { usuario } });\n\n      if (!user) {\n        return res.status(400).json({ erro: 'Usuário não encontrado.' });\n      }\n\n      if (user.senha !== senha) {\n        return res.status(400).json({ erro: 'Senha incorreta.' });\n      }\n\n      // login ok – isso é LAB, nada sofisticado\n      return res.json({ sucesso: true, mensagem: 'Login autorizado!' });\n\n    } catch (error) {\n      console.error('Erro no login:', error);\n      return res.status(500).json({ erro: 'Erro interno no servidor.' });\n    }\n  }\n};"
  }
]
