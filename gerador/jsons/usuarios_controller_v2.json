[
  {
    "caminho": "../backend/modules/usuarios",
    "arquivo": "usuarioController.js",
    "conteudo": "const Usuario = require('./usuarioModel');\n\n// =============================================================\n// Controller do m√≥dulo Usuarios (Maria Fuma√ßa PBQE-C)\n// =============================================================\n\nmodule.exports = {\n\n  // -----------------------------------------\n  // 1) Cadastro de usu√°rio\n  // -----------------------------------------\n  async cadastrarUsuario(req, res) {\n    try {\n      const { usuario, email, senha } = req.body;\n\n      if (!usuario || !email || !senha) {\n        return res.status(400).json({ erro: \"Faltou preencher usu√°rio, email ou senha. Sem eles n√£o consigo continuar üòÖ\" });\n      }\n\n      const regexEmail = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!regexEmail.test(email)) {\n        return res.status(400).json({ erro: \"Opa, acho que seu email n√£o parece correto. D√° uma conferida por favor üòä\" });\n      }\n\n      const usuarioExiste = await Usuario.findOne({ where: { usuario } });\n      if (usuarioExiste) {\n        return res.status(400).json({ erro: \"Bah, parece que esse usu√°rio j√° foi escolhido. Bora tentar outro nome?\" });\n      }\n\n      const emailExiste = await Usuario.findOne({ where: { email } });\n      if (emailExiste) {\n        return res.status(400).json({ erro: \"Esse email j√° t√° na nossa lista. Quer tentar outro?\" });\n      }\n\n      await Usuario.create({ usuario, email, senha });\n\n      return res.json({ sucesso: true, mensagem: \"Usu√°rio criado com sucesso!\" });\n\n    } catch (error) {\n      console.error('Erro no cadastro:', error);\n      return res.status(500).json({ erro: 'Erro interno no servidor.' });\n    }\n  },\n\n  // -----------------------------------------\n  // 2) Login\n  // -----------------------------------------\n  async loginUsuario(req, res) {\n    try {\n      const { usuario, senha } = req.body;\n\n      if (!usuario || !senha) {\n        return res.status(400).json({ erro: \"Preciso de usu√°rio e senha pra te encontrar direitinho üòâ\" });\n      }\n\n      const user = await Usuario.findOne({ where: { usuario } });\n\n      if (!user) {\n        return res.status(400).json({ erro: \"Bah, procurei aqui nos meus registros e n√£o achei esse usu√°rio ü§î\" });\n      }\n\n      if (user.senha !== senha) {\n        return res.status(400).json({ erro: \"Hmmm‚Ä¶ essa senha n√£o bateu com a que tenho aqui. Tenta de novo?\" });\n      }\n\n      return res.json({ sucesso: true, mensagem: 'Login autorizado!' });\n\n    } catch (error) {\n      console.error('Erro no login:', error);\n      return res.status(500).json({ erro: 'Erro interno no servidor.' });\n    }\n  }\n};"
  }
]
