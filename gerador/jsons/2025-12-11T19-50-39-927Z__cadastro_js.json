{
  "caminho": "../backend/public/modules/cadastro/",
  "arquivo": "cadastro.js",
  "conteudo": "const API_BASE = \"/api/usuarios\";\n\nfunction setMessageCadastro(msg, type = \"info\") {\n  const el = document.getElementById(\"msgCadastro\");\n  if (!el) return;\n  el.textContent = msg || \"\";\n  el.className = \"auth-message \" + (msg ? `is-${type}` : \"\");\n}\n\nasync function postJSON(url, payload) {\n  const response = await fetch(url, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(payload || {})\n  });\n  const data = await response.json().catch(() => ({}));\n  return { ok: response.ok, status: response.status, data };\n}\n\nasync function handleCadastro(event) {\n  event.preventDefault();\n  const f = event.target;\n\n  const usuario = f.usuario?.value?.trim();\n  const email = f.email?.value?.trim();\n  const senha = f.senha?.value || \"\";\n  const confirma = f.confirmaSenha?.value || \"\";\n\n  if (!usuario || !email || !senha || !confirma) {\n    setMessageCadastro(\"Preencha todos os campos.\", \"error\");\n    return;\n  }\n\n  if (senha !== confirma) {\n    setMessageCadastro(\"As senhas nÃ£o conferem.\", \"error\");\n    return;\n  }\n\n  setMessageCadastro(\"Enviando dados...\", \"info\");\n\n  try {\n    const { ok, data, status } = await postJSON(`${API_BASE}/cadastrar`, {\n      usuario, email, senha\n    });\n\n    if (!ok) {\n      setMessageCadastro(data.erro || `Erro ao cadastrar (HTTP ${status}).`, \"error\");\n      return;\n    }\n\n    setMessageCadastro(\"Conta criada! Verifique seu e-mail.\", \"success\");\n    f.reset();\n  } catch {\n    setMessageCadastro(\"Erro interno ao cadastrar.\", \"error\");\n  }\n}\n\nwindow.addEventListener(\"DOMContentLoaded\", () => {\n  const form = document.getElementById(\"formCadastro\");\n  if (form) form.addEventListener(\"submit\", handleCadastro);\n});\n"
}