[
  {
    "caminho": "..",
    "arquivo": "Projeto_Petropolitan_v2/backend/scripts/snapshot_sistema.js",
    "conteudo": "const { execSync } = require('child_process');\nconst { Client } = require('pg');\nconst fs = require('fs');\nconst path = require('path');\n\n/**\n * Script gerado pelo Gerador V4.\n * Destino correto: Projeto_Petropolitan_v2/backend/scripts\n */\n\n// Garante execu\u00e7\u00e3o no diret\u00f3rio do pr\u00f3prio script\nprocess.chdir(__dirname);\n\n// Arquivo de sa\u00edda\nconst OUTPUT_FILE = path.join(\n  'C:\\\\Users\\\\Claudio\\\\Desktop\\\\petropolitan\\\\sistema_Petropolian\\\\Petropolitan_Lab',\n  'snapshot_petropolitan_lab.txt'\n);\n\n// Cabe\u00e7alho\nfs.writeFileSync(\n  OUTPUT_FILE,\n  '=== SNAPSHOT PETROPOLITAN LAB ===\\r\\n\\r\\n',\n  'utf8'\n);\n\nfunction section(title) {\n  fs.appendFileSync(\n    OUTPUT_FILE,\n    `\\r\\n==============================\\r\\n${title}\\r\\n==============================\\r\\n`,\n    'utf8'\n  );\n}\n\nfunction write(line) {\n  fs.appendFileSync(OUTPUT_FILE, line + '\\r\\n', 'utf8');\n}\n\n// Caminhos relativos a backend/scripts\nconst modulesPath = path.join('..', 'modules');\nconst publicPath  = path.join('..', 'public');\n\ntry {\n  section('TREE backend/modules');\n  const treeModules = execSync(\n    `cmd /c chcp 65001>nul & tree /A /F \"${modulesPath}\"`,\n    { encoding: 'utf8' }\n  );\n  write(treeModules.trim());\n} catch (err) {\n  write('ERRO TREE backend/modules: ' + err.message);\n}\n\ntry {\n  section('TREE backend/public');\n  const treePublic = execSync(\n    `cmd /c chcp 65001>nul & tree /A /F \"${publicPath}\"`,\n    { encoding: 'utf8' }\n  );\n  write(treePublic.trim());\n} catch (err) {\n  write('ERRO TREE backend/public: ' + err.message);\n}\n\n(async () => {\n  const client = new Client({\n    user: 'bruxao',\n    host: 'localhost',\n    database: 'petropolitan_lab',\n    password: 'bruxao123',\n    port: 5432\n  });\n\n  try {\n    await client.connect();\n\n    section('TABELAS DO BANCO petropolitan_lab');\n\n    const res = await client.query(`\n      SELECT table_schema, table_name\n      FROM information_schema.tables\n      WHERE table_type = 'BASE TABLE'\n        AND table_schema NOT IN ('pg_catalog', 'information_schema')\n      ORDER BY table_schema, table_name;\n    `);\n\n    res.rows.forEach(t => {\n      write(`- ${t.table_schema}.${t.table_name}`);\n    });\n\n  } catch (err) {\n    write('ERRO BANCO: ' + err.message);\n  } finally {\n    await client.end();\n  }\n})();"
  }
]