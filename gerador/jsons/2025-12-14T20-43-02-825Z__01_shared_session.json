{
  "caminho": "../backend/public/modules/shared",
  "arquivo": "session.js",
  "conteudo": "// PBQE-C • Gerenciador de Sessão Frontend\nconst Session = (() => {\n  const TOKEN_KEY = 'tokenPetropolitan';\n  const USER_KEY = 'usuarioPetropolitan';\n\n  function sanitizeLegacyStorage() {\n    try {\n      localStorage.removeItem(TOKEN_KEY);\n      localStorage.removeItem(USER_KEY);\n    } catch (e) {}\n  }\n\n  function setSession({ token, usuario }) {\n    sanitizeLegacyStorage();\n    sessionStorage.setItem(TOKEN_KEY, token);\n    sessionStorage.setItem(USER_KEY, JSON.stringify(usuario));\n  }\n\n  function getToken() {\n    return sessionStorage.getItem(TOKEN_KEY);\n  }\n\n  function getUsuario() {\n    const raw = sessionStorage.getItem(USER_KEY);\n    return raw ? JSON.parse(raw) : null;\n  }\n\n  function isLogado() {\n    return !!getToken();\n  }\n\n  function requireAuth({ redirectTo = '/modules/login/login.html' } = {}) {\n    if (!isLogado()) {\n      window.location.href = redirectTo;\n    }\n  }\n\n  function logout({ redirectTo = '/modules/login/login.html' } = {}) {\n    sessionStorage.clear();\n    sanitizeLegacyStorage();\n    window.location.href = redirectTo;\n  }\n\n  return {\n    setSession,\n    getToken,\n    getUsuario,\n    isLogado,\n    requireAuth,\n    logout\n  };\n})();\n\nwindow.Session = Session;\n"
}